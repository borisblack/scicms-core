coreVersion: v1
kind: Item
includeTemplates:
  - default
metadata:
  name: nationOrderView
  displayName: Order By Nation
  pluralName: nationOrderViews
  displayPluralName: Orders By Nation
  dataSource: main
  query: "
    SELECT
      n.n_nationkey::text AS id, n.n_nationkey::text AS config_id,
      n.n_name AS nation_name, SUM(o.o_totalprice) AS total_price,
      1 AS generation, 'A' AS major_rev, NULL AS minor_rev, 1 AS is_current, NULL AS locale,
      NULL AS lifecycle_id, NULL AS state,
      '6fd701bf-87e0-4aca-bbfd-fe1e9f85fc71' AS permission_id,
      current_timestamp(6) AS created_at, '0c924266-3c61-4362-81d7-9d69403fbe32' AS created_by_id,
      current_timestamp(6) AS updated_at, '0c924266-3c61-4362-81d7-9d69403fbe32' AS updated_by_id, NULL AS locked_by_id
    FROM orders o
      LEFT JOIN customer c ON c.c_custkey = o.o_custkey
        LEFT JOIN nation n ON n.n_nationkey = c.c_nationkey
    GROUP BY
      id, config_id,
      n.n_name,
      generation, major_rev, minor_rev, is_current, locale, lifecycle_id, state, permission_id,
      created_at, created_by_id, updated_at, updated_by_id, locked_by_id"
  titleAttribute: nationName
  description: Orders By Nation
  readOnly: true
  performDdl: false
spec:
  attributes:
    nationName:
      type: string
      columnName: nation_name
      displayName: Nation Name
      description: Nation Name
      required: true
      length: 25
    totalPrice:
      type: decimal
      columnName: total_price
      displayName: Total Price
      description: Total Price
      required: true
      precision: 15
      scale: 2
      fieldWidth: 150
